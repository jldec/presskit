# Presskit implementation notes

## tl;dr
- pnpm install
- in separate terminals:
  - cd src/worker then `pnpm dev` or `pnpm dev-jldec`
  - cd src/dev then `pnpm dev` or `pnpm dev-jldec` (required for local content)
  - cd src/worker then `pnpm dev:css` (only needed for tailwind css classes)
  - cd src/client athen `pnpm dev` (only needed for building the react chat UI)

## src/worker
- this is the only worker deployed to cloudflare
- it renders markdown and serves routes and hosts a partykit websocket server
- markdown source files and the directory tree (manifest) are fetched from github
- there are 2 wrangler.toml configs for jldec.me and presskit.jldec.me

## src/dev
- this is used only in local dev to avoid pulling files from github
- it serves static files and a manifest from the locally cloned markdown repo
- there is one wrangler.toml with an env.jldec override for the jldec.me content
- the presskit website markdown is in this repo at src/dev/content

## src/client
- this is a modified partyserver client from https://github.com/threepointone/durable-chat
- the build output is copied into public/js
- the partyserver lives in src/worker/src/party.ts

### /public/js/htmx.*
- manually copied htmx.js and htmx.min.js from node_modules/.pnpm/htmx.org.../dist
- after pnpm install of latest 2.x version in src/worker
- see https://github.com/bigskysoftware/htmx/releases
- currently used by /admin UI to call /api/* routes

### public/css/styles.css
- auto-generated by tailwind
